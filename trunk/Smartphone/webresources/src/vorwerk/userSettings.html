<div data-role="page" id="userSettings" style="height: 100%">
    
    <div data-role="header" class="headerbar" data-position="fixed" data-tap-toggle="false">
        <div class="ui-btn-left">
            <a href="#" data-role="button" data-theme="b" data-mini="false" data-inline="true" data-image="back" class="btn-with-image"
                data-bind="click:back"></a>
        </div>
        <h1>
            <div class="screenTitle">
                <span data-i18n="userSettings.navi.title" data-bind="translate: language">[navi title]</span> 
            </div>
            <div class="robotName">
                <span data-bind="text: robot().robotName">[robot name]</span>
            </div>
        </h1>
    </div>

    <div data-role="content" class="max-size">
        
        <fieldset>
            <h2 data-i18n="userSettings.page.country"
                data-bind="translate: language">[robot_name]</h2>
            <ul data-role="listview" data-theme="a" data-inset="true" class="with-image">
                <li data-bind="attr:{'data-country':selectedCountryCode}">
                    <a href="javascript:void(0);" data-bind="click: changeCountry">
                        <h3 data-bind="text:selectedCountryLabel">[country]</h3>
                    </a>
                </li>
            </ul>
        </fieldset>
        
        
        <fieldset class="indent">
            <h2 data-i18n="userSettings.page.email_adress"
                data-bind="translate: language">[robot_id]</h2>
            <p class="label" data-bind="text: user().email">asd</p>
        </fieldset>
                
        <fieldset class="indent">
            <h2 data-i18n="userSettings.page.password"
                data-bind="translate: language">[password]</h2>
            
            <div class="line">
                <p class="label">*****</p>
                <div class="right-block">
                    <a href="#" data-role="button" data-theme="b" data-mini="false" 
                        data-i18n="common.change"
                        data-bind="translate:{obs:language(),target: textTarget.jqLinkButton}, click: changePassword">[change]</a> 
                </div>
            </div>
            
            <div class="emptyline"></div>
        </fieldset>
        
        
        
        <fieldset>
            <a href="#" data-role="button" data-theme="c" data-mini="false"  
                    data-i18n="common.logout"
                    data-bind="translate:{obs:language(),target: textTarget.jqLinkButton}, click: logout">[logout]</a>
        </fieldset>
        
    </div>
    
    <div id="changePasswordPopup" data-history="false" data-role="popup" data-dismissible="false" data-corners="false" data-theme="none" data-shadow="false" data-overlay-theme="a" class="dialog ui-mobile-viewport dialogType_1">
        <div data-role="header" data-theme="b">
            <h1 class="ui-title" role="heading" aria-level="1" data-i18n="common.edit" data-bind="translate: language">[edit]</h1>
        </div>
        <div class="popupHeaderLine"></div>

        <div data-role="content">
            <fieldset>
                <p data-i18n="userSettings.page.password"
                    data-bind="translate: language">[password]</p>
                <div class="line">
                    <input type="password"
                        data-i18n="userSettings.page.old_password" 
                        data-bind="translate:{obs:language(), target: textTarget.PLACEHOLDER}, value: oldPassword, valueUpdate: 'afterkeydown', jqmInputVisible: !showPassword()"/>
                    <input type="text"
                        data-i18n="userSettings.page.old_password" 
                        data-bind="translate:{obs:language(), target: textTarget.PLACEHOLDER}, value: oldPassword, valueUpdate: 'afterkeydown', jqmInputVisible: showPassword()"/>
                </div>
                <div class="line">
                    <input type="password"
                        data-i18n="userSettings.page.new_password" 
                        data-bind="translate:{obs:language(), target: textTarget.PLACEHOLDER}, value: newPassword, valueUpdate: 'afterkeydown', jqmInputVisible: !showPassword()"/>
                    <input type="text"
                        data-i18n="userSettings.page.new_password" 
                        data-bind="translate:{obs:language(), target: textTarget.PLACEHOLDER}, value: newPassword, valueUpdate: 'afterkeydown', jqmInputVisible: showPassword()"/>
                </div>
                <div class="line">
                    <input type="password"
                        data-i18n="userSettings.page.new_password_verify" 
                        data-bind="translate:{obs:language(), target: textTarget.PLACEHOLDER}, value: newPasswordRepeat, valueUpdate: 'afterkeydown', jqmInputVisible: !showPassword(), jqmInputCSS: {invalid: passwordValid}"/>
                    <input type="text"
                        data-i18n="userSettings.page.new_password_verify" 
                        data-bind="translate:{obs:language(), target: textTarget.PLACEHOLDER}, value: newPasswordRepeat, valueUpdate: 'afterkeydown', jqmInputVisible: showPassword(), jqmInputCSS: {invalid: passwordValid}"/>
                </div>
                <div class="line">
                    <input type="checkbox" name="togglePassword" id="togglePassword" data-theme="b" class="custom" data-bind="checked: showPassword" />
                    <label for="togglePassword" data-i18n="userSettings.page.password_show" data-inline="true"
                        data-bind="translate:{obs:language(),target: textTarget.jqLinkButton}">[show pwd]</label>
                </div>
            </fieldset>
            <div data-role="controlgroup" data-type="horizontal" class="center">
                    <a class="first-button" href="#" data-role="button" data-theme="b" data-mini="false" 
	                    data-i18n="common.ok" 
	                    data-bind="translate:{obs:language(),target: textTarget.jqLinkButton}, jqLinkButtonEnable: okEnabled(), click: commitEdit">[ok]</a>
                    <a class="second-button" href="#" data-role="button" data-theme="b" data-mini="false" 
                        data-i18n="common.cancel"
                        data-bind="translate:{obs:language(),target: textTarget.jqLinkButton}, click: cancelEdit">[cancel]</a>
            </div>
            
		</div>
	</div>

    <div id="changeCountryPopup" data-history="false" data-role="popup" data-dismissible="false" data-corners="false" data-theme="none" data-shadow="false" data-overlay-theme="a" class="dialog ui-mobile-viewport dialogType_1">
        <div data-role="header" data-theme="b">
            <h1 class="ui-title" role="heading" aria-level="1" data-i18n="common.edit" data-bind="translate: language">[edit]</h1>
        </div>
        <div class="popupHeaderLine"></div>

        <div data-role="content">
            <div id="countrySelectionListContainer" data-bind="jqRadioGroup:selectedCountryCode">
                        <fieldset id="countrySelectionList" class="radioGroup" data-bind="foreach:{ data: countries, afterRender: renderedCountries }">
                            <label class="with-image"
                                    data-bind="jqText:{node:'last', text:label}, attr:{'data-country':value}">
                                <input type="radio" name='selectCountry3' data-theme="a" data-role="none"
                                     data-bind="attr:{'value':value}, checked: $parent.selectedCountryCode" />[country]</label>
                        </fieldset>
            </div>
            <div data-role="controlgroup" data-type="horizontal" class="center">
                    <a class="first-button" href="#" data-role="button" data-theme="b" data-mini="false" 
	                    data-i18n="common.ok" 
	                    data-bind="translate:{obs:language(),target: textTarget.jqLinkButton},  click: commitCountryEdit">[ok]</a>
                    <a class="second-button" href="#" data-role="button" data-theme="b" data-mini="false" 
                        data-i18n="common.cancel"
                        data-bind="translate:{obs:language(),target: textTarget.jqLinkButton}, click: cancelCountryEdit">[cancel]</a>
            </div>
            
		</div>
	</div>

    
</div>